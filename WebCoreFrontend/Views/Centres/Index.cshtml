@{
    @using WebCoreFrontend.Models;
    @model IEnumerable<Centre>;

}
<h1>Centres</h1>
<div id="Centreview">
    <table id="centreTable">
        <caption>Centre List</caption>
        <tr>
            <th>Id</th>
            <th>Centre Name</th>
            <th></th>
        </tr>
        @foreach (var centre in Model)
        {
            <tr>
                <td>@centre.Id</td>
                <td>@centre.Name</td>
                <td><button id="deleteStu">Delete</button></td>
                <td><button id="create" onclick="create()">Create</button></td>
            </tr>
        }
    </table>
</div>
<script>
    var tab = document.getElementById("centreTable");
    var tr = tab.getElementsByTagName("tr");

    for (var i = 0; i < tr.length; i++)tr[i].onclick = function () {
        var thisTR = this.innerHTML;//content
        var id = $(this).children().eq(0).text();//first td
        deleteStu(id)
    }

    function deleteStu(id) {

        $.ajax({
            url: '/centres/deletecentre/?id='+id,
            type: 'delete',
            contentType: 'application/json',
            processData: false,
            success: function (data, textStatus, jQxhr) {
                alert("Data Dleted");
            },
            error: function (xhr, textStatus, error) {
                alert("Error: " + xhr.responseText);
                console.log(xhr.statusText);
                console.log(textStatus);
                console.log(error);
            }
        });
    }

    function create() {
        $.ajax({
            type: 'POST',
            url: '/centres/createcentre/',
            contentType: 'application/json',
            data: JSON.stringify(
                {
                    "Name": 'sydney',
                    "Id": null
                }),
            success: function (data, textStatus, jQxhr) {
                alert("Data created");
            },
            error: function (xhr, textStatus, error) {
                alert("Error: " + xhr.responseText);
                console.log(xhr.statusText);
                console.log(textStatus);
                console.log(error);
            }
        });
    }

</script>